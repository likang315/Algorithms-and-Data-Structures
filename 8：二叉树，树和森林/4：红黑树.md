### 二叉平衡树（Self-balancing binary search tree）又被称为 AVL 树（有别于AVL算法）

它是一棵空树或它的左右两个子树的高度差的绝对值不超过1，并且左右两个子树都是一棵平衡二叉树

###### 最小二叉平衡树的节点总数的公式：F(n)=F(n-1)+F(n-2)+1 

一般的二叉搜索树（Binary Search Tree）:其期望高度（即为一棵平衡树时）为logn，其各操作的时间复杂（O(logn)）同时也由此而决定。但是，在某些极端的情况下（如在插入的序列是有序的时），二叉搜索树将退化成近似链或链，此时，其操作的时间复杂度将退化成线性的，即O(n)

![](G:\Algorithms and Data Structures\8：二叉树，树和森林\平衡二叉树.jpg)

### 二叉平衡树性能

二叉平衡树的严格**平衡策略**以牺牲，建立查找结构(插入，删除操作)的代价，换来了稳定的O(logN) 的查找时间复杂度 
它虽然是复杂的，但它的最坏情况运行时间也是非常良好的，并且在实践中是高效的： 它可以在O(log n)时间内做查找，插入和删除，这里的n 是树中元素的数目



## 2-3树

是最简单的B树结构，其**每个非叶节点都有两个或三个子女，而且所有叶都在统一层上**

![](G:\Algorithms and Data Structures\8：二叉树，树和森林\树：2-3树.png)





### 红黑树：是一种近似平衡的二叉查找树，它能够确保任何一个节点的左右子树的高度差不会超过二者中较低那个的一倍，有序

![](G:\Algorithms and Data Structures\8：二叉树，树和森林\红黑树.png)

##### 具体来说，红黑树是满足如下条件的二叉查找树（binary search tree）：

1. 每个节点要么是红色，要么是黑色

2. 根节点必须是黑色

3. 红色节点不能连续（也即是，红色节点的孩子和父亲都不能是红色）

4. 对于每个节点，从该点至`null`（树尾端）的任何路径，都含有相同个数的黑色节点

   在树的结构发生改变时（插入或者删除操作），往往会破坏上述条件3或条件4，需要通过调整使得查找树重新满足红黑树的条件调整可以分为两类：一类是颜色调整，即改变某个节点的颜色；另一类是结构调整，即改变检索树的结构关系，**结构调整过程包含两个基本操作：左旋（Rotate Left），右旋（Rotate Right）**

   ### 1：把x,y 交换，把y 的左子女赋给x的右子女

   ![](G:\Algorithms and Data Structures\8：二叉树，树和森林\红黑树_右旋.png)

   ### 把x进行左旋，把y 的左子女，赋给x的右子女

![](G:\Algorithms and Data Structures\8：二叉树，树和森林\红黑树_左旋.png)

### 2：插入

###### 第一步: 将红黑树当作一颗二叉查找树，将节点插入

###### 第二步：将插入的节点着色为"红色"

###### 第三步: 通过一系列的旋转或着色等操作，使之重新成为一颗红黑树

被插入节点的父节点的情况，可以"当节点 z 被着色为红色节点，并插入二叉树"划分为三种情况来处理

###### ①  情况说明：被插入的节点是根节点。

​    处理方法：直接把此节点涂为黑色。

###### ②  情况说明：被插入的节点的父节点是黑色。

​    处理方法：什么也不需要做。节点被插入后，仍然是红黑树。

###### ③  情况说明：被插入的节点的父节点是红色。

​    处理方法：那么，该情况与红黑树的“特性(5)”相冲突。这种情况下，被插入节点是一定存在非空祖父节点的；进一步的讲，被插入节点也一定存在叔叔节点(即使叔叔节点为空，我们也视之为存在，空节点本身就是黑色节点)

##### 核心：将红色的节点移到根节点；然后，将根节点设为黑色

### 3：删除

###### 第一步：将红黑树当作一颗二叉查找树，将节点删除

​       这和"删除常规二叉查找树中删除节点的方法是一样的"。分3种情况：
​       ① 被删除节点没有儿子，即为叶节点。那么，直接将该节点删除就OK了
​       ② 被删除节点只有一个儿子。那么，直接删除该节点，并用该节点的唯一子节点顶替它的位置
​       ③ 被删除节点有两个儿子。那么，先找出它的后继节点；然后把“它的后继节点的内容”复制给“该节点的内容”；之后，删除“它的后继节点”

###### 第二步：通过"旋转和重新着色"等一系列来修正该树，使之重新成为一棵红黑树

###### 

### 4：红黑树的性能

1：红黑树放弃了追求完全平衡，追求大致平衡，在与平衡二叉树的时间复杂度相差不大的情况下，保证每次插入最多只需要三次旋转就能达到平衡，实现起来也更为简单

2：红黑树通过左旋右旋来调整树的高度，从而提高查询效率，它能保证最坏情况下仍然具有对数的时间复杂度

**降低树的高度，因为树的查找性能取决于树的高度。所以树的高度越低搜索的效率越高！**



### 二叉查找树 ---红黑树

![](G:\Algorithms and Data Structures\8：二叉树，树和森林\二叉树-红黑树.png)







